function InitFiltering(){temporaryObject=JSON.parse(JSON.stringify(locationInfo)),filterBySize(),filterByFeature(),filterByDeals(),$("#mprDetailDataTable tbody").html(GenerateTablebody(temporaryObject)),Sorting()}function filterBySize(){let e=$("#size_filter").val();"all"==e?temporaryObject=JSON.parse(JSON.stringify(locationInfo)):"small"==e?SizeFilter(0,75):"medium"==e?SizeFilter(76,150):"large"==e&&SizeFilter(150,400)}function SizeFilter(e,t){let a={};$.each(temporaryObject.units,function(l,i){"false"==i.UnitExtra.ExcludeFromWebsite&&"false"==i.ExcludeFromInsurance&&0!=i.Width&&0!=i.Length&&Number(i.TotalArea)>=e&&Number(i.TotalArea)<=t&&(a[l]=i)}),temporaryObject.units=a}function filterByFeature(){let e=$("#feature_filter").val(),t={};"all"!=e&&($.each(temporaryObject.units,function(a,l){"false"==l.UnitExtra.ExcludeFromWebsite&&"false"==l.ExcludeFromInsurance&&0!=l.Width&&0!=l.Length&&-1!==l.CustomFields.indexOf(e)&&(t[a]=l)}),temporaryObject.units=t)}function filterByDeals(){let e=$("#deals_filter").val(),t={};"all"!=e&&($.each(temporaryObject.units,function(a,l){"false"==l.UnitExtra.ExcludeFromWebsite&&"false"==l.ExcludeFromInsurance&&0!=l.Width&&0!=l.Length&&-999!=l.ConcessionID&&e==l.Concession.PlanName&&(t[a]=l)}),temporaryObject.units=t)}function Sorting(){let e=$("#sorter_tag").val();"PriceLow2High"==e?SortingManagement("rate","asc"):"PriceHigh2Low"==e?SortingManagement("rate","desc"):"SizeLow2High"==e?SortingManagement("area","asc"):"SizeHigh2Low"==e&&SortingManagement("area","desc")}function SortingManagement(e,t){let a="",l={};"rate"==e?a="StandardRate":"area"==e&&(a="TotalArea"),$.each(temporaryObject.units,function(e,t){l[e]=t[a]});let i=[];for(var o in l)i.push([o,l[o]]);i.sort(function(e,t){return e[1]-t[1]}),"desc"==t&&i.reverse();var n=jQuery("#mprDetailDataTable"),s="";for(let e=0;e<=i.length-1;e++){let t=i[e][0];n.find("tr").each(function(e,a){var l=parseInt($(this).data("unitid"));t==l&&(s+=$(this).prop("outerHTML"))})}$("#mprDetailDataTable tbody").html(s)}function LoadFeatureDropDown(){var e=[],t="",a='<option value="all">All</option>';$.each(locationInfo.units,function(l,i){$.each(i.CustomFields,function(l,i){-1==e.indexOf(i)&&(e.push(i),"Custom Unit Attribute 1"==i?t="Access 6a – 11p":"Custom Unit Attribute 2"==i?t="24/7 Monitoring":"Custom Unit Attribute 3"==i?t="Unload Indoors":"Custom Unit Attribute 4"==i?t="Loading Dock":"Custom Unit Attribute 5"==i?t="Drive Up Unit":"Automobile"==i?t="Vehicle Storage":"Boat"==i?t="Boat Storage":"Heated"==i?t="Heated Units":"Lighted"==i?t="Lighted":"Air Cooled"==i&&(t="Air Cooled"),a+=`<option value="${i}">${t}</option>`)})}),$("#feature_filter").html(a)}function LoadDealDropDown(){var e=[],t='<option value="all">All</option>';$.each(locationInfo.units,function(a,l){-999!=l.ConcessionID&&-1==e.indexOf(l.Concession.PlanName)&&(e.push(l.Concession.PlanName),t+=`<option value="${l.Concession.PlanName}">${l.Concession.PlanName}</option>`)}),$("#deals_filter").html(t)}function GenerateTablebody(e){let t="";return $.each(e.units,function(e,a){let l=a.UnitExtra.Floor,i=(a.UnitExtra.ClimateControlled,a.UnitExtra.EntryLocation,a.UnitExtra.ExcludeFromWebsite),o=a.ConcessionID,n="",s="",r="";-999==o?(n=a.StandardRate,s=""):(n=a.Concession.DiscountedRate,s=`<span class='highlightFeat' style='background:#034A97;'>${a.Concession.PlanName}</span><center><small><b>Sale Ends March 31st</b></small></center>`),5==Number(a.Width)&&5==Number(a.Length)?(r="<small>A 5 × 5 unit is approximately 25 sq feet and is suitable for storing the contents of a closet that needs decluttering, or small amounts of personal possessions. This unit is capable of storing items like: Small Seasonal Items, Small to Medium Moving Boxes, Loveseat, Chairs, End Tables, Record Collections, Family Keepsakes, Twin Mattress, and File Cabinets. </small>",r+='<div style="padding-top: 56.25%; position: relative; overflow: hidden; box-shadow: rgb(51, 51, 51) 10px 10px 42px -21px;margin-top:10px;"><iframe frameborder="0" allowfullscreen="" scrolling="no" allow="autoplay;fullscreen" src="https://onelineplayer.com/player.html?autoplay=true&autopause=false&muted=true&loop=true&url=https%3A%2F%2Fbluebirdstorage.ca%2Fwp-content%2Fuploads%2F2022%2F01%2F5x5-Storage-Guide-Animation.mp4&poster=&time=false&progressBar=false&overlay=false&muteButton=false&fullscreenButton=false&style=light&quality=auto&playButton=false" style="position: absolute; height: 100%; width: 100%; left: 0px; top: 0px;"></iframe></div>'):r=5==Number(a.Width)&&10==Number(a.Length)?'<div style="padding-top: 56.25%; position: relative; overflow: hidden; box-shadow: rgb(51, 51, 51) 10px 10px 42px -21px;"><iframe frameborder="0" allowfullscreen="" scrolling="no" allow="autoplay;fullscreen" src="https://onelineplayer.com/player.html?autoplay=true&autopause=false&muted=true&loop=true&url=https%3A%2F%2Fbluebirdstorage.ca%2Fwp-content%2Fuploads%2F2022%2F01%2F5x10-Storage-Guide-Animation.mp4&poster=&time=false&progressBar=false&overlay=false&muteButton=false&fullscreenButton=false&style=light&quality=auto&playButton=false" style="position: absolute; height: 100%; width: 100%; left: 0px; top: 0px;"></iframe></div>':5==Number(a.Width)&&15==Number(a.Length)?'<div style="padding-top: 56.25%; position: relative; overflow: hidden; box-shadow: rgb(51, 51, 51) 10px 10px 42px -21px;"><iframe frameborder="0" allowfullscreen="" scrolling="no" allow="autoplay;fullscreen" src="https://onelineplayer.com/player.html?autoplay=true&autopause=false&muted=true&loop=true&url=https%3A%2F%2Fbluebirdstorage.ca%2Fwp-content%2Fuploads%2F2022%2F01%2F5x15.mp4&poster=&time=false&progressBar=false&overlay=false&muteButton=false&fullscreenButton=false&style=light&quality=auto&playButton=false" style="position: absolute; height: 100%; width: 100%; left: 0px; top: 0px;"></iframe></div>':10==Number(a.Width)&&10==Number(a.Length)?'<div style="padding-top: 56.25%; position: relative; overflow: hidden; box-shadow: rgb(51, 51, 51) 10px 10px 42px -21px;"><iframe frameborder="0" allowfullscreen="" scrolling="no" allow="autoplay;fullscreen" src="https://onelineplayer.com/player.html?autoplay=true&autopause=false&muted=true&loop=true&url=https%3A%2F%2Fbluebirdstorage.ca%2Fwp-content%2Fuploads%2F2022%2F01%2F10x10-Storage-Guide-Animation.mp4&poster=&time=false&progressBar=false&overlay=false&muteButton=false&fullscreenButton=false&style=light&quality=auto&playButton=false" style="position: absolute; height: 100%; width: 100%; left: 0px; top: 0px;"></iframe></div>':"";let c=`<h3>${Number(a.Width)} x ${Number(a.Length)}' </h3>`;if(""==r&&(c=""),"false"==i&&"false"==a.ExcludeFromInsurance&&0!=a.Width&&0!=a.Length){t+=`<tr class="shortableClass unit_${a.UnitID}" data-listing-price="${Math.round(a.Width)} * ${Number(a.Length)}" data-size="${Number(a.Width)} * ${Number(a.Length)}" data-area="${Number(a.TotalArea)}" data-unitid="${a.UnitID}">\n                    <td class="">\n                        <div class="col-md-7 sizeSecIcon">\n                        \n                            <div class="row">\n                                <div class="col-md-3">\n                                    <h2 class="widthHeight" style="font-weight:bold;margin-bottom:20px;"><yy>${Number(a.Width)}'<yy1>WIDTH</yy1></yy>\n                                    x <xx>${Number(a.Length)}'<xx1>DEPTH</xx1></xx></h2>\n                                </div>  \n                                <div class="col-md-4 col-xs-6">`;let e=a.UnitType;"Indoor Self Storage"!=e&&"Premium Self Storage"!=e||(e="Self Storage"),t+=`<span class='highlightFeat' style='background: #fc4d04;'>${e}</span>\n                </div>  \n                <div class="col-md-4 col-xs-6">\n                    ${s}\n                </div>  \n                                \n                <div class="col-md-12">\n                    <div class="featureText">`,$.each(a.CustomFields,function(e,a){let l="";"Custom Unit Attribute 1"==a?l="<i class='far fa-user-unlock'></i> Access </br>6a – 11p":"Custom Unit Attribute 2"==a?l="<i class='fak fa-bluebird-icon-camera'></i> 24/7 Monitoring":"Custom Unit Attribute 3"==a?l="<i class='fak fa-bluebird-icon-drivethru'></i> Unload Indoors":"Custom Unit Attribute 4"==a?l="<i class='fak fa-bluebird-icon-driveupunits'></i> Loading Dock":"Custom Unit Attribute 5"==a?l="<i class='fak fa-bluebird-icon-driveupunits'></i> Drive Up Unit":"Automobile"==a?l="<i class='fak fa-bluebird-icon-vehicle'></i> Vehicle Storage":"Boat"==a?l="<i class='fak fa-bluebird-icon-boat'></i> Boat Storage":"Heated"==a?l="<i class='fak fa-bluebird-icon-heated'></i> Heated </br>Units":"Air Cooled"==a&&(l="<i class='far fa-snowflake'></i> Air </br>Cooled"),t+=`<span>${l}</span>`}),1==l?t+="<span><i class='fak fa-square-g-solid'></i>Ground </br>Floor</span>":2==l?t+="<span><i class='fak fa-square-2-solid'></i> Level </br>Two</span>":3==l?t+="<span><i class='fak fa-square-3-solid'></i> Level </br>Three</span>":4==l?t+="<span><i class='fak fa-square-4-solid'></i> Level </br>Four</span>":5==l?t+="<span><i class='fak fa-square-5-solid'></i> Level </br>Five</span>":6==l?t+="<span><i class='fak fa-square-6-solid'></i> Level </br>Six</span>":7==l&&(t+="<span><i class='fak fa-square-7-solid'></i> Level </br>Seven</span>"),1!=l&&(t+="<span><i class='fak fa-bluebird-icon-elevator'></i> Large Cargo Elevator</span>"),t+=`</div>\n                    </div>\n                </div>  \n                </div>\n                <div class="col-md-5 text-right">\n                    <div class="row">\n                    <div class="col-md-12 col-xs-12"><center><p>Month to Month - No Long Term Commitments</p></center></div>\n                        <div class="col-md-5 col-xs-6">\n                            <h2 class="priceTooltip actualMoPrice" con="${o}" style="font-weight:bold;">$${Math.round(n)}<small>/month</small> </h2>\n                                    <small style="margin-top: -10px; display: block;">Promotional Period</small>\n                                </div>  \n                                <div class="col-md-4 col-xs-6 text-left">`,-999==o||(t+=`<h2 style='text-decoration-color: #fc4d04;margin-top:10px;'>$${Math.round(a.StandardRate)}<small>/month</small></h2>;\n                        <small style='margin-top: -10px; display: block;'>After Promotional Period</small>`),t+=`</div>\n                    <div class="col-md-3 text-center">\n                        <span class="hideOnMobile popoverHoverCont" style="cursor:pointer;" data-toggle="popoverMy" title="${c}" data-placement="left" data-content='${r}'><i style="font-size: 40px; display: block; text-align: center;" class="far fa-cubes"></i> What Will Fit?</span>\n                                </div>  \n                    </div>\n                    <div class="row">`,a.TotalUnitsAvailable>3||"L024"==loc?t+=`<div class="col-md-6 text-center noPaddingDesktop">\n                                        <a data-toggle="tooltip" data-placement="top" data-html="true" title="Save time! Pay and sign lease online in just a few minutes. Government issued ID must be shown at storage facility to get access code." href="${base_url}step_three?location=${loc}&unit=${a.UnitID}&type=rent&con=${o}" class="btn btn-primary rentBtn">Rapid Rental</a>\n                                        </br><span class="helpText rent"><small><i>7 Day Risk Free Trial. Easily Switch Sizes.</i></small></span>\n                                    </div>\n                                    <div class="col-md-6 text-center">\n                                        \n                                        <tgg data-toggle="tooltip" data-placement="top" data-html="true" title="We’ll hold your unit for up to 14 days and you can finish the rental paperwork at our storage location."><a onclick="insertInfo(${a.UnitID});" class="btn btn-primary reserveBtn" data-toggle="modal" data-target="#reserveFormModal" >Reserve for Free</a></tgg>\n                                        </br><span class="helpText reserve"><small><i>No Credit Card Required.  Takes 10 seconds or less. </i></small></span>\n                                    </div>`:t+=`<div class="col-md-12 text-center">\n                            <h4 style="padding-top:20px;">Limited availability. </br>Please <a style="cursor:pointer;" onclick="$crisp.push(['do', 'chat:open'])">Chat</a> or call <a href="tel:${getData[loc].Phone}">${getData[loc].Phone}</a> for assistance.</h4>\n                        </div>`,t+="</div>\n                        </div>\n                    </td>\n                </tr>"}}),t}$(".btn-reset").click(function(){$(".filter-criteria").val("all"),$("#sorter_tag").val("PriceLow2High"),InitFiltering()}),$(".filter-criteria").change(function(){InitFiltering()});